# Generated by Django 3.1.7 on 2021-03-24 15:22

from django.db import migrations

types = [
    {
        "label": "Office",
        "osm_tags": {"office": "yes"},
        "children": [
            {"label": "Association", "osm_tags": {"office": "association"}, "children": [], "synonyms": ["info"]},
            {
                "label": "Company",
                "osm_tags": {"office": "company"},
                "children": [
                    {
                        "label": "Real estate",
                        "osm_tags": {"office": "estate_agent"},
                        "children": [],
                        "synonyms": ["apartment rent", "house shop", "brokerage"],
                    },
                    {
                        "label": "Architect",
                        "osm_tags": {"office": "architect"},
                        "children": [],
                        "synonyms": ["architecture"],
                    },
                    {"label": "Lawyer", "osm_tags": {"office": "lawyer"}, "children": [], "synonyms": []},
                ],
                "synonyms": ["agency", "insurance company", "management"],
            },
            {"label": "Diplomatic", "osm_tags": {"office": "diplomatic"}, "children": [], "synonyms": []},
            {"label": "Educational", "osm_tags": {"office": "educational_institution"}, "children": [], "synonyms": []},
            {"label": "Government", "osm_tags": {"office": "government"}, "children": [], "synonyms": []},
        ],
        "synonyms": [],
    },
    {
        "label": "Shop",
        "osm_tags": {"shop": "yes"},
        "children": [
            {
                "label": "Home furnishing",
                "osm_tags": {"shop": "yes"},
                "children": [
                    {
                        "label": "Carpets",
                        "osm_tags": {"shop": "carpet"},
                        "children": [],
                        "synonyms": ["floors", "mats"],
                    },
                    {
                        "label": "Antiques",
                        "osm_tags": {"shop": "antiques"},
                        "children": [],
                        "synonyms": ["antiikki"],
                        "also_in": ["Second hand"],
                    },
                    {
                        "label": "Houseware",
                        "osm_tags": {"shop": "houseware"},
                        "children": [],
                        "synonyms": ["cooking", "dishes"],
                    },
                    {
                        "label": "Interior decoration",
                        "osm_tags": {"shop": "interior_decoration"},
                        "children": [],
                        "synonyms": ["design", "sisustus"],
                    },
                    {
                        "label": "Furniture",
                        "osm_tags": {"shop": "furniture"},
                        "children": [],
                        "synonyms": ["huonekalut"],
                    },
                    {
                        "label": "Picture frame shop / framing service",
                        "osm_tags": {"shop": "frame"},
                        "children": [],
                        "synonyms": ["kehystämö"],
                    },
                    {
                        "label": "Bathroom furnishing",
                        "osm_tags": {"shop": "bathroom_furnishing"},
                        "children": [],
                        "synonyms": [],
                    },
                    {"label": "Curtains", "osm_tags": {"shop": "curtain"}, "children": [], "synonyms": []},
                    {
                        "label": "Kitchen",
                        "osm_tags": {"shop": "kitchen"},
                        "children": [],
                        "synonyms": [],
                        "also_in": ["Construction"],
                    },
                    {"label": "Pottery", "osm_tags": {"shop": "pottery"}, "children": [], "synonyms": []},
                ],
                "synonyms": [],
            },
            {
                "label": "Creative arts shop",
                "osm_tags": {"shop": "yes"},
                "also_in": ["Culture"],
                "children": [
                    {"label": "Art", "osm_tags": {"shop": "art"}, "children": [], "synonyms": ["taide"]},
                    {
                        "label": "Books",
                        "osm_tags": {"shop": "books"},
                        "children": [
                            {
                                "label": "Used books",
                                "osm_tags": {"shop": "books", "second_hand": "only"},
                                "children": [],
                                "synonyms": [],
                            }
                        ],
                        "synonyms": ["kirjakauppa"],
                    },
                    {"label": "Video", "osm_tags": {"shop": "video"}, "children": [], "synonyms": ["movies"]},
                    {"label": "Records", "osm_tags": {"shop": "music"}, "children": [], "synonyms": []},
                    {
                        "label": "Musical instruments",
                        "osm_tags": {"shop": "musical_instrument"},
                        "children": [],
                        "synonyms": [],
                    },
                    {
                        "label": "Photography supplies & services",
                        "osm_tags": {"shop": "photo"},
                        "children": [],
                        "synonyms": [],
                    },
                    {"label": "Arts & crafts", "osm_tags": {"shop": "craft"}, "children": [], "synonyms": []},
                ],
                "synonyms": [],
            },
            {
                "label": "Clothes & accessories",
                "osm_tags": {"shop": "clothes"},
                "children": [
                    {
                        "label": "Childrens clothes",
                        "osm_tags": {"shop": "clothes", "clothes": "children"},
                        "children": [],
                        "synonyms": ["lasten vaatekauppa"],
                    },
                    {
                        "label": "Sports clothes",
                        "osm_tags": {"shop": "clothes", "clothes": "sports"},
                        "children": [],
                        "synonyms": ["urheiluvaatekauppa"],
                    },
                    {
                        "label": "Hats",
                        "osm_tags": {"shop": "clothes", "clothes": "hats"},
                        "children": [],
                        "synonyms": [],
                    },
                    {
                        "label": "Dressmaker",
                        "osm_tags": {"craft": "dressmaker"},
                        "children": [],
                        "synonyms": ["wedding", "ompelija"],
                    },
                    {
                        "label": "Second hand clothes",
                        "osm_tags": {"shop": "clothes", "second_hand": "only"},
                        "children": [],
                        "synonyms": [],
                        "also_in": ["Second hand"],
                    },
                    {
                        "label": "Tailor",
                        "osm_tags": {"craft": "tailor"},
                        "children": [],
                        "synonyms": [],
                        "also_in": ["Service"],
                    },
                    {
                        "label": "Underwear",
                        "osm_tags": {"shop": "clothes", "clothes": "underwear"},
                        "children": [],
                        "synonyms": [],
                    },
                    {"label": "Shoes", "osm_tags": {"shop": "shoes"}, "children": [], "synonyms": ["kenkäkauppa"]},
                    {"label": "Bags", "osm_tags": {"shop": "bag"}, "children": [], "synonyms": ["luggage"]},
                    {"label": "Jewelry", "osm_tags": {"shop": "jewelry"}, "children": [], "synonyms": ["korut"]},
                    {"label": "Watches", "osm_tags": {"shop": "watches"}, "children": [], "synonyms": []},
                    {
                        "label": "Gloves",
                        "osm_tags": {"shop": "clothes", "clothes": "gloves"},
                        "children": [],
                        "synonyms": [],
                    },
                    {
                        "label": "Fashion accessories",
                        "osm_tags": {"shop": "fashion_accessories"},
                        "children": [],
                        "synonyms": [],
                    },
                    {"label": "Goldsmith", "osm_tags": {"craft": "goldsmith"}, "children": [], "synonyms": []},
                ],
                "synonyms": ["couture", "vaatekauppa"],
            },
            {
                "label": "Second hand",
                "osm_tags": {"shop": "second_hand"},
                "children": [],
                "synonyms": ["flea market", "recycling shop"],
            },
            {"label": "Florist", "osm_tags": {"shop": "florist"}, "children": [], "synonyms": ["flowers"]},
            {
                "label": "Supermarket",
                "osm_tags": {"shop": "supermarket"},
                "children": [],
                "synonyms": ["food", "food shop", "groceries", "store", "convenience", "ruokakauppa"],
            },
            {"label": "Gifts", "osm_tags": {"shop": "gift"}, "children": [], "synonyms": []},
            {"label": "Hifi", "osm_tags": {"shop": "hifi"}, "children": [], "synonyms": ["speakers", "music shop"]},
            {
                "label": "Health & beauty",
                "osm_tags": {"shop": "beauty"},
                "children": [
                    {
                        "label": "Chemist: drugs, hygiene, cosmetics, cleaning etc.",
                        "osm_tags": {"shop": "chemist"},
                        "children": [],
                        "synonyms": [],
                    },
                    {"label": "Cosmetics", "osm_tags": {"shop": "cosmetics"}, "children": [], "synonyms": []},
                    {
                        "label": "Optician",
                        "osm_tags": {"shop": "optician"},
                        "children": [],
                        "synonyms": [],
                        "also_in": ["Healthcare"],
                    },
                    {
                        "label": "Hairdressing supplies",
                        "osm_tags": {"shop": "hairdresser_supply"},
                        "children": [],
                        "synonyms": [],
                    },
                ],
                "synonyms": [],
            },
            {"label": "Mall", "osm_tags": {"shop": "mall"}, "children": [], "synonyms": []},
            {"label": "Gardening", "osm_tags": {"shop": "garden_centre"}, "children": [], "synonyms": []},
            {"label": "Bicycles", "osm_tags": {"shop": "bicycle"}, "children": [], "synonyms": ["cycling", "bikes"]},
            {
                "label": "Outdoor",
                "osm_tags": {"shop": "outdoor"},
                "children": [
                    {"label": "Fishing", "osm_tags": {"shop": "fishing"}, "children": [], "synonyms": []},
                    {"label": "Hunting", "osm_tags": {"shop": "hunting"}, "children": [], "synonyms": []},
                ],
                "synonyms": [],
            },
            {
                "label": "Sports",
                "osm_tags": {"shop": "sports"},
                "children": [
                    {
                        "label": "Equestrian",
                        "osm_tags": {"shop": "sports", "sport": "equestrian"},
                        "children": [],
                        "synonyms": [],
                    },
                    {
                        "label": "Skates",
                        "osm_tags": {"shop": "sports", "sport": "ice_skating"},
                        "children": [],
                        "synonyms": [],
                    },
                ],
                "synonyms": [],
            },
            {
                "label": "Construction",
                "osm_tags": {"shop": "hardware"},
                "children": [
                    {"label": "Hardware", "osm_tags": {"shop": "hardware"}, "children": [], "synonyms": []},
                    {"label": "Paint", "osm_tags": {"shop": "paint"}, "children": [], "synonyms": []},
                    {
                        "label": "Window construction",
                        "osm_tags": {"craft": "window_construction"},
                        "children": [],
                        "synonyms": [],
                    },
                    {
                        "label": "Glaziery (glass shop)",
                        "osm_tags": {"craft": "glaziery"},
                        "children": [],
                        "synonyms": [],
                    },
                ],
                "synonyms": [],
            },
            {"label": "Party supplies", "osm_tags": {"shop": "party"}, "children": [], "synonyms": []},
            {"label": "Pets", "osm_tags": {"shop": "pet"}, "children": [], "synonyms": []},
            {"label": "Sex shop", "osm_tags": {"shop": "erotic"}, "children": [], "synonyms": []},
            {"label": "Tobacco", "osm_tags": {"shop": "tobacco"}, "children": [], "synonyms": []},
            {"label": "Toys", "osm_tags": {"shop": "toys"}, "children": [], "synonyms": []},
            {"label": "Sewing", "osm_tags": {"shop": "sewing"}, "children": [], "synonyms": ["yarn"]},
        ],
        "synonyms": [],
    },
    {
        "label": "Food & drink",
        "osm_tags": {"shop": "yes"},
        "children": [
            {
                "label": "Food & drink shops",
                "osm_tags": {"shop": "yes"},
                "also_in": ["Shop"],
                "children": [
                    {"label": "Alcohol", "osm_tags": {"shop": "alcohol"}, "children": [], "synonyms": []},
                    {"label": "Bakery", "osm_tags": {"shop": "bakery"}, "children": [], "synonyms": ["leipomo"]},
                    {
                        "label": "Confectionery",
                        "osm_tags": {"shop": "confectionery"},
                        "children": [],
                        "synonyms": ["sweets"],
                    },
                    {"label": "Butcher", "osm_tags": {"shop": "butcher"}, "children": [], "synonyms": []},
                ],
            },
            {"label": "Bar", "osm_tags": {"amenity": "bar"}, "children": [], "synonyms": ["karaoke bar", "pub"]},
            {
                "label": "Café",
                "osm_tags": {"amenity": "cafe"},
                "children": [],
                "synonyms": ["coffee shop", "kahvila", "teahouse"],
            },
            {"label": "Nightclub", "osm_tags": {"amenity": "nightclub"}, "children": [], "synonyms": []},
            {"label": "Catering service", "osm_tags": {"craft": "caterer"}, "children": [], "synonyms": []},
            {
                "label": "Restaurant",
                "osm_tags": {"amenity": "restaurant"},
                "children": [],
                "synonyms": ["pizzeria", "ravintola"],
            },
        ],
        "synonyms": [],
    },
    {
        "label": "Healthcare",
        "osm_tags": {"healthcare": "yes"},
        "children": [
            {
                "label": "Clinic",
                "osm_tags": {"amenity": "clinic", "healthcare": "clinic"},
                "children": [],
                "synonyms": ["medical center"],
            },
            {
                "label": "Hospital",
                "osm_tags": {"amenity": "hospital", "healthcare": "hospital"},
                "children": [],
                "synonyms": [],
            },
            {
                "label": "Dentist",
                "osm_tags": {"amenity": "dentist", "healthcare": "dentist"},
                "children": [],
                "synonyms": [],
            },
            {
                "label": "Physiotherapist",
                "osm_tags": {"healthcare": "physiotherapist"},
                "children": [],
                "synonyms": ["fysioterapia"],
            },
            {
                "label": "Pharmacy",
                "osm_tags": {"amenity": "pharmacy"},
                "children": [],
                "synonyms": [],
                "also_in": ["Shop"],
            },
        ],
        "synonyms": [],
    },
    {
        "label": "Service",
        "osm_tags": {"shop": "yes"},
        "children": [
            {
                "label": "Funeral directors",
                "osm_tags": {"shop": "funeral_directors"},
                "children": [],
                "synonyms": ["hautaustoimisto"],
            },
            {
                "label": "Repair service",
                "osm_tags": {"shop": "yes", "repair": "yes"},
                "children": [
                    {
                        "label": "Bicycle repair",
                        "osm_tags": {"shop": "bicycle", "repair": "yes"},
                        "children": [],
                        "also_in": ["Bicycles"],
                        "synonyms": ["bike repair"],
                    },
                    {
                        "label": "Shoe repair",
                        "osm_tags": {"shop": "shoe_repair"},
                        "children": [],
                        "also_in": ["Shoes"],
                        "synonyms": ["cobbler", "suutari"],
                    },
                    {
                        "label": "Phone repair",
                        "osm_tags": {"craft": "electronics_repair", "electronics_repair": "phone"},
                        "children": [],
                        "synonyms": [],
                        "also_in": ["Second hand"],
                    },
                ],
                "synonyms": [],
            },
            {"label": "Car rental", "osm_tags": {"amenity": "car_rental"}, "children": [], "synonyms": []},
            {"label": "Car wash", "osm_tags": {"amenity": "car_wash"}, "children": [], "synonyms": []},
            {"label": "Childcare", "osm_tags": {"amenity": "childcare"}, "children": [], "synonyms": ["daycare"]},
            {"label": "Cinema", "osm_tags": {"amenity": "cinema"}, "children": [], "synonyms": []},
            {"label": "Events venue", "osm_tags": {"amenity": "events_venue"}, "children": [], "synonyms": ["club"]},
            {"label": "Escape game", "osm_tags": {"leisure": "escape_game"}, "children": [], "synonyms": []},
            {
                "label": "Bookbinder",
                "osm_tags": {"craft": "bookbinder"},
                "children": [],
                "synonyms": [],
                "also_in": ["Books"],
            },
            {
                "label": "Beauty",
                "osm_tags": {"shop": "beauty"},
                "children": [
                    {
                        "label": "Nail salon",
                        "osm_tags": {"shop": "beauty", "beauty": "nails"},
                        "children": [],
                        "synonyms": [],
                    },
                    {
                        "label": "Hairdresser",
                        "osm_tags": {"shop": "hairdresser"},
                        "children": [],
                        "synonyms": ["barber shop", "parturi", "hairsalon", "kampaamo"],
                    },
                    {
                        "label": "Tattoo parlour",
                        "osm_tags": {"shop": "tattoo"},
                        "children": [],
                        "synonyms": ["body piercing"],
                    },
                    {
                        "label": "Tanning salon / solarium",
                        "osm_tags": {"leisure": "tanning_salon"},
                        "children": [],
                        "synonyms": [],
                    },
                ],
                "synonyms": ["kauneushoitola", "spa", "skincare", "salon"],
            },
            {"label": "Laundry", "osm_tags": {"shop": "laundry"}, "children": [], "synonyms": []},
            {
                "label": "Locksmith",
                "osm_tags": {"craft": "locksmith"},
                "children": [],
                "synonyms": [],
                "also_in": ["Shop"],
            },
            {"label": "Massage", "osm_tags": {"shop": "massage"}, "children": [], "synonyms": ["spa"]},
            {
                "label": "Photographer",
                "osm_tags": {"craft": "photographer"},
                "children": [],
                "synonyms": ["passikuvat", "valokuvastudio"],
            },
            {"label": "Printing / copying", "osm_tags": {"shop": "copyshop"}, "children": [], "synonyms": []},
            {"label": "Travel agency", "osm_tags": {"shop": "travel_agency"}, "children": [], "synonyms": []},
            {
                "label": "Fitness centre",
                "osm_tags": {"leisure": "fitness_centre"},
                "children": [
                    {
                        "label": "Yoga studio",
                        "osm_tags": {"leisure": "fitness_centre", "sport": "yoga"},
                        "children": [],
                        "synonyms": [],
                    },
                    {
                        "label": "Taekwondo centre",
                        "osm_tags": {"leisure": "fitness_centre", "sport": "taekwondo"},
                        "children": [],
                        "synonyms": [],
                    },
                ],
                "synonyms": ["gym", "martial arts"],
            },
            {"label": "Sports centre", "osm_tags": {"leisure": "sports_centre"}, "children": [], "synonyms": []},
            {"label": "Video / recording studio", "osm_tags": {"amenity": "studio"}, "children": [], "synonyms": []},
            {"label": "Bank", "osm_tags": {"amenity": "bank"}, "children": [], "synonyms": []},
            {"label": "Hotel", "osm_tags": {"tourism": "hotel"}, "children": [], "synonyms": []},
            {"label": "Parcel lockers", "osm_tags": {"amenity": "parcel_lockers"}, "children": [], "synonyms": []},
            {"label": "Parking", "osm_tags": {"amenity": "parking"}, "children": [], "synonyms": []},
            {"label": "Post office", "osm_tags": {"amenity": "post_office"}, "children": [], "synonyms": []},
            {"label": "Recycling point", "osm_tags": {"amenity": "recycling"}, "children": [], "synonyms": []},
            {"label": "Sauna", "osm_tags": {"leisure": "sauna"}, "children": [], "synonyms": []},
        ],
        "synonyms": [],
    },
    {
        "label": "Culture",
        "osm_tags": {"amenity": "arts_centre"},
        "children": [
            {"label": "Arts centre", "osm_tags": {"amenity": "arts_centre"}, "children": [], "synonyms": []},
            {"label": "Art gallery", "osm_tags": {"tourism": "gallery"}, "children": [], "synonyms": []},
            {"label": "Library", "osm_tags": {"amenity": "library"}, "children": [], "synonyms": []},
            {"label": "Museum", "osm_tags": {"tourism": "museum"}, "children": [], "synonyms": []},
            {"label": "Theatre", "osm_tags": {"amenity": "theatre"}, "children": [], "synonyms": ["theater"]},
        ],
        "synonyms": [],
    },
    {
        "label": "Religion",
        "osm_tags": {"office": "religion"},
        "children": [
            {"label": "Religious office", "osm_tags": {"office": "religion"}, "children": [], "synonyms": []},
            {
                "label": "Place of worship",
                "osm_tags": {"amenity": "place_of_worship"},
                "children": [
                    {
                        "label": "Church",
                        "osm_tags": {"amenity": "place_of_worship", "religion": "christian"},
                        "children": [],
                        "synonyms": [],
                    }
                ],
                "synonyms": [],
            },
        ],
        "synonyms": [],
    },
    {
        "label": "Education",
        "osm_tags": {"amenity": "school"},
        "children": [
            {"label": "Kindergarten", "osm_tags": {"amenity": "kindergarten"}, "children": [], "synonyms": []},
            {"label": "School", "osm_tags": {"amenity": "school"}, "children": [], "synonyms": []},
            {"label": "College", "osm_tags": {"amenity": "college"}, "children": [], "synonyms": []},
            {
                "label": "Dance school",
                "osm_tags": {"leisure": "dance", "dance:teaching": "yes"},
                "children": [],
                "synonyms": [],
            },
            {"label": "Music school", "osm_tags": {"amenity": "music_school"}, "children": [], "synonyms": []},
        ],
        "synonyms": [],
    },
]


shop_mapping = {
    "": "Shop",
    "?": "Shop",
    "Alcohol": "Alcohol",
    "Antiikki kauppa": "Antiques",
    "Apartment rent": "Real estate",
    "Art": "Art",
    "Bakery": "Bakery",
    "Barber Shop": "Hairdresser",
    "Barbershop": "Hairdresser",
    "Bicycle repair shop": "Bicycle repair",
    "Book shop": "Books",
    "Book store": "Books",
    "Bookbinder": "Bookbinder",
    "Books": "Books",
    "Cafeteria": "Café",
    "Carpets and textilfloors": "Carpets",
    "Clinic": "Clinic",
    "Clothes": "Clothes & accessories",
    "Clothing": "Clothes & accessories",
    "Clothing store": "Clothes & accessories",
    "Coffe shop": "Café",
    "Confectionery": "Confectionery",
    "Cooking": "Houseware",
    "Cosmetics": "Cosmetics",
    "Couture": "Clothes & accessories",
    "Cycling": "Bicycles",
    "Decoration shop": "Interior decoration",
    "Dentist": "Dentist",
    "Design": "Interior decoration",
    "Design Shop": "Interior decoration",
    "Design kauppa": "Interior decoration",
    "Fishing shop": "Fishing",
    "Flea market": "Second hand",
    "Flowers": "Florist",
    "Food": "Supermarket",
    "Food shop": "Supermarket",
    "Furniture": "Furniture",
    "Furniture shop": "Furniture",
    "Furniture store": "Furniture",
    "Fysioterapia": "Physiotherapist",
    "Galleria taideliike": "Art",
    "Gardening": "Gardening",
    "Gift shop": "Gifts",
    "Groceries": "Supermarket",
    "Grocery": "Supermarket",
    "Grocery store": "Supermarket",
    "Hairdresser": "Hairdresser",
    "Hand craft store": "Arts & crafts",
    "Hand crafts store": "Arts & crafts",
    "Hautaustoimisti": "Funeral directors",
    "Hifi": "Hifi",
    "Huonekalukauppa": "Furniture",
    "Hyvinvointikauppa": "Chemist: drugs, hygiene, cosmetics, cleaning etc.",
    "Interior contractor shop": "Interior decoration",
    "Interior decoration": "Interior decoration",
    "Jeverly": "Jewelry",
    "Jewelery shop": "Jewelry",
    "Kahvila": "Café",
    "Kauneushoitola": "Beauty",
    "Kehystämö": "Picture frame shop / framing service",
    "Kenkäkauppa": "Shoes",
    "Kirjakauppa": "Books",
    "Korukauppa": "Jewelry",
    "Lasten vaatekauppa": "Childrens clothes",
    "Luggage shop": "Bags",
    "Luggage store": "Bags",
    "Mall": "Mall",
    "Mat store": "Carpets",
    "Movie store": "Video",
    "Nail salon": "Nail salon",
    "Optician": "Optician",
    "Outdoor": "Outdoor",
    "Parturi": "Hairdresser",
    "Phone repair": "Phone repair",
    "Real-estate": "Real estate",
    "Record shop": "Records",
    "Record store": "Records",
    "Recycling shop": "Second hand",
    "Restaurant": "Restaurant",
    "Second hand": "Second hand",
    "Shoe shop": "Shoes",
    "Shop": "Shop",
    "Sisustus kaupp": "Interior decoration",
    "Spa": "Beauty",
    "Speaker store": "Hifi",
    "Sports": "Sports",
    "Store": "Supermarket",
    "Sweets": "Confectionery",
    "Urheiluvaate kauppa": "Sports clothes",
    "Used books": "Used books",
    "Vaatekauppa": "Clothes & accessories",
    "Watch shop": "Watches",
    "Wedding": "Dressmaker",
    "antique shop": "Antiques",
    "antiques": "Antiques",
    "art": "Art",
    "art shop": "Art",
    "bakery": "Bakery",
    "bathroom_furnishing": "Bathroom furnishing",
    "beauty": "Beauty",
    "bicycle": "Bicycles",
    "bikes": "Bicycles",
    "book_store": "Books",
    "books": "Books",
    "butcher": "Butcher",
    "cafe": "Café",
    "carpet": "Carpets",
    "clothes": "Clothes & accessories",
    "clothing": "Clothes & accessories",
    "cobbler": "Shoe repair",
    "convenience": "Supermarket",
    "craft": "Arts & crafts",
    "craft=window_construction": "Window construction",
    "curtain": "Curtains",
    "decor_shop": "Interior decoration",
    "design": "Interior decoration",
    "dish shop": "Houseware",
    "estate_agent": "Real estate",
    "fashion_accessories": "Fashion accessories",
    "florist": "Florist",
    "flower": "Florist",
    "food": "Supermarket",
    "furniture": "Furniture",
    "gift": "Gifts",
    "glass": "Glaziery (glass shop)",
    "gloves_shop": "Gloves",
    "goldsmith": "Goldsmith",
    "grocery": "Supermarket",
    "grocery store": "Supermarket",
    "hairdresser": "Hairdresser",
    "hairdresser_supply": "Hairdressing supplies",
    "hairsalon": "Hairdresser",
    "hardware": "Hardware",
    "hat": "Hats",
    "hat_shop": "Hats",
    "hifi": "Hifi",
    "house_shop": "Real estate",
    "houseware": "Houseware",
    "hunting": "Hunting",
    "interior decoration": "Interior decoration",
    "interior shop": "Interior decoration",
    "interior_decoration": "Interior decoration",
    "items": "Shop",
    "jewelry": "Jewelry",
    "jewerly shop": "Jewelry",
    "jewerly_shop": "Jewelry",
    "kitchen": "Kitchen",
    "laundry": "Laundry",
    "locksmith": "Locksmith",
    "market": "Supermarket",
    "massage": "Massage",
    "music shop": "Hifi",
    "musical_instrument": "Musical instruments",
    "optician": "Optician",
    "paint": "Paint",
    "parturi-kampaamo": "Hairdresser",
    "party": "Party supplies",
    "passikuvat": "Photographer",
    "pet": "Pets",
    "pharmacy": "Pharmacy",
    "photo": "Photographer",
    "photos": "Photography supplies & services",
    "pottery": "Pottery",
    "record store": "Records",
    "restaurant": "Restaurant",
    "ruokakauppa": "Supermarket",
    "second hand": "Second hand",
    "second hand used clothes store": "Second hand clothes",
    "second_hand": "Second hand",
    "sex_shop": "Sex shop",
    "shoe_shop": "Shoes",
    "shoes": "Shoes",
    "shop": "Shop",
    "skate shop": "Skates",
    "skincare": "Beauty",
    "sports clothing": "Sports clothes",
    "studio": "Shop",
    "supermarket": "Supermarket",
    "tailor": "Tailor",
    "tattoo": "Tattoo parlour",
    "tobacco": "Tobacco",
    "toys": "Toys",
    "travel_agency": "Travel agency",
    "underwear shop": "Underwear",
    "watches": "Watches",
    "yarn": "Sewing",
    "yes": "Shop",
    "yoga": "Yoga studio",
}

amenity_mapping = {
    "?": "Shop",
    "agency": "Company",
    "amenity=recycling": "Recycling point",
    "architecture": "Architect",
    "art": "Art",
    "arts_centre": "Arts centre",
    "assembly": "Religious office",
    "atelier": "Tailor",
    "bakery": "Bakery",
    "bank": "Bank",
    "bar": "Bar",
    "bar, restaurant": "Restaurant",
    "bar/restaurant": "Restaurant",
    "barber": "Hairdresser",
    "barbershop": "Hairdresser",
    "beauty": "Beauty",
    "beauty salon": "Beauty",
    "beauty salong": "Beauty",
    "beauty shop": "Beauty",
    "beautysalon": "Beauty",
    "bike repair": "Bicycle repair",
    "body piercing": "Tattoo parlour",
    "brokerage": "Real estate",
    "cafe": "Café",
    "cafe/bar": "Café",
    "café": "Café",
    "car_rent": "Car rental",
    "car_wash": "Car wash",
    "catering service": "Catering service",
    "chinese restaurant": "Restaurant",
    "christ": "Religious office",
    "church": "Church",
    "cinema": "Cinema",
    "clinic": "Clinic",
    "clothes": "Clothes & accessories",
    "club": "Events venue",
    "cobbler": "Shoe repair",
    "coffee & wine bar": "Bar",
    "coffee shop": "Café",
    "college": "College",
    "community_centre": "Company",
    "dance": "Dance school",
    "dance_school": "Dance school",
    "daycare": "Childcare",
    "dentist": "Dentist",
    "design_studio?": "Company",
    "designer": "Company",
    "equestrian": "Equestrian",
    "estate_agent": "Real estate",
    "eye clinic": "Clinic",
    "fitness centre": "Fitness centre",
    "fitness_centre": "Fitness centre",
    "florist": "Florist",
    "furniture": "Furniture",
    "fysioterapia": "Physiotherapist",
    "fysiotheraphy": "Physiotherapist",
    "gallery": "Art gallery",
    "gym": "Fitness centre",
    "hair dresser": "Hairdresser",
    "hair salon": "Hairdresser",
    "hair_salon": "Hairdresser",
    "hairdrersser": "Hairdresser",
    "hairdresser": "Hairdresser",
    "hairsalon": "Hairdresser",
    "healthcare": "Healthcare",
    "hospital": "Hospital",
    "hotel": "Hotel",
    "houses": "Real estate",
    "info": "Association",
    "insurance company": "Company",
    "jewelry": "Jewelry",
    "kahvila": "Café",
    "kampaamo": "Hairdresser",
    "karaoke bar": "Bar",
    "kindergarten": "Kindergarten",
    "laser_pressing": "Printing / copying",
    "laundry": "Laundry",
    "lawyer": "Lawyer",
    "government": "Government",
    "yoga": "Yoga studio",
    "library": "Library",
    "logistics": "Company",
    "management": "Company",
    "martial arts gym": "Fitness centre",
    "massage": "Massage",
    "medical center": "Clinic",
    "museum": "Museum",
    "music_school": "Music school",
    "nail salon": "Nail salon",
    "nailsalon": "Nail salon",
    "night club": "Nightclub",
    "nightclub": "Nightclub",
    "ompelija": "Dressmaker",
    "optician": "Optician",
    "parcel_lockers": "Parcel lockers",
    "parking": "Parking",
    "parking_space": "Parking",
    "parturi": "Hairdresser",
    "passport photography": "Photographer",
    "pharmacy": "Pharmacy",
    "photo": "Photographer",
    "photography": "Photographer",
    "physiotheraphy": "Physiotherapist",
    "pizzeria": "Restaurant",
    "place of worship": "Place of worship",
    "place_of_worship": "Place of worship",
    "post": "Post office",
    "pub": "Bar",
    "ravintola": "Restaurant",
    "recycling": "Recycling point",
    "religious": "Religious office",
    "rental service": "Company",
    "restaurant": "Restaurant",
    "restaurant/bar": "Restaurant",
    "room escape": "Escape game",
    "salon": "Beauty",
    "sauna": "Sauna",
    "school": "School",
    "shoemaker": "Laundry",
    "skincare": "Beauty",
    "solarium": "Tanning salon / solarium",
    "spa": "Massage",
    "sports_centre": "Sports centre",
    "company": "Company",
    "studio": "Video / recording studio",
    "sushi n roll": "Restaurant",
    "suutari": "Shoe repair",
    "taekwondo": "Taekwondo centre",
    "tattoo": "Tattoo parlour",
    "tattooing": "Tattoo parlour",
    "teahouse": "Café",
    "theater": "Theatre",
    "theatre": "Theatre",
    "ticket gallery": "Art gallery",
    "tourism": "Hotel",
    "travelling": "Travel agency",
    "valokuvastudio": "Photographer",
    "vegan restaurant": "Restaurant",
    "video producing": "Video / recording studio",
    "visas": "Travel agency",
    "wealth management": "Company",
    "workshop": "Company",
}


def forwards(apps, schema_editor):
    types_index = {}

    def recurse(types, fn, parent=None):
        for t in types:
            fn(t, parent)
            recurse(t["children"], fn, t)

    def index(t, p):
        types_index[t["label"]] = t

    recurse(types, index)

    def check_categories(t, p):
        for c in t.get("also_in", []):
            if not types_index.get(c):
                pass

    recurse(types, check_categories)

    for mapping in [shop_mapping, amenity_mapping]:
        for _key, value in mapping.items():
            t = types_index.get(value)
            if not t:
                continue

    WorkplaceType = apps.get_model("olmap", "WorkplaceType")

    t_model_index = {}

    def add_type(t, p):
        t_model_index[t["label"]] = WorkplaceType.objects.create(
            label=t["label"], osm_tags=t["osm_tags"], synonyms=t.get("synonyms", [])
        )
        if p:
            t_model_index[t["label"]].parents.add(t_model_index[p["label"]])

    recurse(types, add_type)

    def add_parents(t, p):
        for also_in in t.get("also_in", []):
            t_model_index[t["label"]].parents.add(t_model_index[also_in])

    recurse(types, add_parents)

    Workplace = apps.get_model("olmap", "Workplace")
    Shop = apps.get_model("olmap", "Shop")
    Amenity = apps.get_model("olmap", "Amenity")
    Office = apps.get_model("olmap", "Office")

    for Model in [Shop, Amenity, Office]:
        for i in Model.objects.all().select_related("image_note"):
            type_key = shop_mapping.get(i.type, amenity_mapping.get(i.type.lower(), i.type.capitalize()))
            t = t_model_index.get(type_key)
            if not t:
                continue

            if "Workplace" not in i.image_note.tags:
                i.image_note.tags.append("Workplace")
            i.image_note.save()

            Workplace.objects.create(
                type=t,
                name=i.name,
                image_note=i.image_note,
                street=i.street,
                housenumber=i.housenumber,
                unit=i.unit,
                phone=i.phone,
                opening_hours=i.opening_hours,
                level=i.level,
            )


class Migration(migrations.Migration):
    dependencies = [
        ("olmap", "0004_workplace_workplacetype"),
    ]

    operations = [migrations.RunPython(forwards, lambda m, s: None)]
